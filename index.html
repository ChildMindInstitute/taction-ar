<!DOCTYPE html>
<html>

<!-- 
This Augmented Reality (AR) mobile web experience is an exploration in the use of augmented 
reality to help people over come fear and anxiety - a sort of AR exposure therapy. The idea is to 
invoke, confront and overcome symbols or representations on fear and anxiety in a real world 
'daily life' setting.

Designed and developed by Curt White (curtpw@gmail.com) at the Child Mind Institute MATTER Lab: https://matter.childmind.org
Code is open source and available here: https://github.com/ChildMindInstitute/taction-ar
Started from 8th Wall A-Frame Product Boilerplate.
-->

<head>
  <meta charset="utf-8">
  <title>Taction AR</title>

  <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>

  <!-- We've included a slightly modified version of A-Frame, which fixes some polish concerns -->
  <script src="//cdn.8thwall.com/web/aframe/8frame-0.8.2.min.js"></script>
  <!-- Included Don McCurdy's aframe-extras for animation-mixer component in AFrame -->
  <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v5.0.0/dist/aframe-extras.min.js"></script>
  <script src="//cdn.8thwall.com/web/aframe/aframe-animation-component-5.1.2.min.js"></script>
  <!-- XR Extras - provides utilities like load screen, almost there, and error handling.
         See github.com/8thwall/web/xrextras -->
  <!-- <script defer src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script> -->
  <!-- 8thWall Web - Replace the app key here with your own app key -->
  <script async src="//apps.8thwall.com/xrweb?appKey=s7uGvCNJAkTrMQ6UpClduqwSpaOdc95QZ0YC4UBhDKItiNxY2ywCvW5cWFAuwgNdiM63Mc"></script>
  <link rel="stylesheet" href="index.css">
  <script src="./js/index.js"></script>
 <!-- <script src="./js/hold-drag.js"></script> -->
  <script src="./js/gesture-detector.js"></script>
  <script src="./js/pinch-scale.js"></script>
  <script src="./js/aframe-look-at-component.min.js"></script>
  <script src="./js/aframe-gif-component.min.js"></script>
<!--  <script src="./js/aframe-gif-shader.min.js"></script> -->
  <!-- <script src="./aframe-inspector-master/dist/aframe-inspector.js"></script> -->


</head>

<body>
  <!-- 2D overlay UI can be done in HTML -->
  <div id="overlay">
    <div id="loadingScreen">
    <!--  <img id="loadingImg" src="graphics/LoadingScreen.jpg"> -->
      <img id="loadingImg" src="graphics/shark.gif">
    </div>
  </div>

  <div id="gyroSettings" class="absolute-fill" style="display: none"></div>

  <div id="promptImage">
    <img src="graphics/prompt.png" height="120px">
  </div>

 <!-- ***************** INITIAL USER INTERFACE ******************* -->
  <div id="fearsearch" class="search-ui">

    <H2 class="search-ui">NAME YOUR FEAR</H2>

    <div id="search_form" class="search-ui">
      <input type="text" id="search_txt" class="search-ui select-button" placeholder="lions, tigers, and bears oh my" />
      <button id="submitsearch" class="search-ui select-button">search</button>
    <!--  <h2>or</h2> -->
      <button id="selectdogs" class="search-ui select-button">DOGS</button>
      <button id="selectbees" class="search-ui select-button">BEES</button>
    </div>

    <div id="bar-wrapper">
      <p>Loading...</p>
      <div class="container">
        <div class="bar"></div>
      </div>
    </div>

  </div>

  <div id="dialogue"></div>
  <div id="scoredisplay">SCORE: 0</div>

  <div class="gfxButton" id="extLinkButton">
    <a href="http://matter.childmind.org/">
    <img src="graphics/extLinkButton.jpg" height="25px" ></a>
  </div>

  
  <!-- ***************** A-FRAME SCENE ******************* -->
  <!-- We must add the global components to the scene -->
  <a-scene loading-screen game-loop gesture-detector  camera-orientation req-camera-permissions shadow="type: pcfsoft"
  devicemotion-checker>




    <!-- We can define assets here to be loaded when A-Frame initializes -->
    <a-assets>
   <!--   <a-asset-item id="demoModel" src="glb/Moxy08e.glb"></a-asset-item> -->

      <!-- audio -->
      <audio id="scarymusicclip" src="audio/Le-grand-cahier-Les-alertes_short.mp3">
      <audio id="dogmusicclip" src="audio/DogGrowling.mp3">
      <audio id="beemusicclip" src="audio/beehive-clip.mp3">
      <audio id="explodesoundclip" src="audio/explosion_backdraft.mp3">

      <!-- images -->
      <img id="explode" src="graphics/explode.gif">

      <img id="dogimageinit" src="graphics/dog1small.gif">
      <img id="beeimageinit" src="graphics/bee1.gif">

      <img id="feargraphic1" src="graphics/tinyplaceholder.gif">
      <img id="feargraphic2" src="graphics/tinyplaceholder.gif">
      <img id="feargraphic3" src="graphics/tinyplaceholder.gif">
      <img id="feargraphic4" src="graphics/tinyplaceholder.gif">
      <img id="feargraphic5" src="graphics/tinyplaceholder.gif">

    </a-assets>

    <!-- The raycaster will emit mouse events on scene objects specified with the cantap class -->
    <a-camera  id="camera" position="0 8 8" raycaster="objects: .cantap" cursor="
          fuse: false;
          rayOrigin: mouse;">
      </a-entity>

    </a-camera>

    <a-entity id="ambient" light="type: ambient; intensity: .5;"></a-entity>
    <a-entity id="rim" light="type:directional;intensity:.75;color:#ffffff" position="-4.0 1.6 -6.0"></a-entity>
    <a-entity id="fill" light="type:directional;intensity:0.5;color:#ffffff" position="4.0 3.6 6.0"></a-entity>
    <a-entity id="key" light="type: directional; castShadow:true; shadowCameraTop:20; shadowCameraRight:20;
      color:#ffffff; intensity:1.0" position="5.0 10.0 5.0"></a-entity>
    


  <!--  <a-image src="#explode"></a-image> -->

    <a-entity id="ground" class="cantap" geometry="primitive: box" material="color: #ffffff; transparent: true; opacity: 0.0"
      scale="1000 2 1000" position="0 -1 0" shadow-material shadow>
    </a-entity>   


   <!-- <a-image position="4.5 2 0"  width="10" height="10" src="#snake1" look-at="#camera"></a-image> -->


    <a-entity id="thefear" 
              initdistance="0"
              geometry="primitive:plane;width:12;height:12"  
              material="shader:gif; alphaTest:0.5;" 
              visible="true" 
              look-at="#camera" 
              pinch-scale-destroy>
      <a-sound id="scarymusic" src="#scarymusicclip" autoplay="true" loop="true" crossorigin="anonymous" preload="false" volume="1"></a-sound>

    </a-entity>

    <a-entity id="explodegraphic" geometry="primitive:plane;width:12;height:12;"  material="shader:gif; alphaTest:0.5; src:#explode" visible="false" look-at="#camera">
      <a-sound id="explodesound" src="#explodesoundclip" autoplay="false" loop="false" crossorigin="anonymous" preload="auto" volume="1"></a-sound>
    </a-entity>

    
    <!-- <a-entity id="spideyM" gltf-model="#spideyModel"  hold-drag two-finger-spin pinch-scale scale="5.0 5.0 5.0" position="0.0 -2.454 0.0" visible=true> -->
      
    </a-entity>

    

  </a-scene>


</body>

</html>

